apiVersion: v1
kind: ConfigMap
metadata:
  name: keycloak-python-setup
  namespace: keycloak
  labels:
    app.kubernetes.io/name: keycloak-python-config
    app.kubernetes.io/component: configuration
    app.kubernetes.io/part-of: keycloak
    app.kubernetes.io/managed-by: argocd
data:
  setup.sh: |
    #!/bin/bash
    set -e
    
    echo "🐍 Setting up Padmini Systems Keycloak Python Configuration"
    echo "=========================================================="
    
    # Install requirements
    pip install --no-cache-dir -r /config/requirements.txt
    
    # Copy Python files to working directory
    cp -r /config/python-executor/* /app/
    
    # Set proper permissions
    chmod +x /app/main.py
    
    echo "✅ Python environment ready"
    
  requirements.txt: |
    # Padmini Systems Keycloak Admin API Configuration
    # Enterprise-grade Python dependencies

    # HTTP client with connection pooling and retry capabilities
    requests>=2.31.0

    # Enhanced logging and validation
    colorama>=0.4.6

    # JSON manipulation and validation
    jsonschema>=4.19.0

    # Date/time utilities
    python-dateutil>=2.8.2

    # Environment variable handling
    python-dotenv>=1.0.0

    # Retry decorators for robust API calls
    tenacity>=8.2.3

    # Type hints support for Python < 3.9
    typing-extensions>=4.8.0
